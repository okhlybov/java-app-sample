plugins {
    id 'buildlogic.javafx-common-conventions'
    id 'org.beryx.jlink'
}

dependencies {
    implementation project(':app-cli')
    implementation project(':app-javafx')
}

jlink {
    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']
    customImage {
        appModules = ['app.cli', 'app.javafx'] // Have to set this explicitly due to https://github.com/beryx/badass-jlink-plugin/issues/290
    }
    launcher {
        name = 'app'
        noConsole = false
        mainClass = 'app.cli.Main'
        moduleName = 'app.cli'
    }
    secondaryLauncher {
        name = 'appfx'
        noConsole = true
        mainClass = 'app.javafx.Main'
        moduleName = 'app.javafx'
        jvmArgs = ['-Xmx256m']
    }
}
















import org.gradle.jvm.toolchain.JavaLanguageVersion

// Define the toolchain you are interested in
def toolchainSpec = javaToolchains.launcherFor {
    languageVersion.set(JavaLanguageVersion.of(17)) // Specify the desired Java version
}

// Access the resolved toolchain's installation path
tasks.register('printToolchainPath') {
    doLast {
        def launcher = toolchainSpec.get() // Resolve the launcher
        def installationPath = launcher.metadata.installationPath
        println("Toolchain installation path: $installationPath")
    }
}





